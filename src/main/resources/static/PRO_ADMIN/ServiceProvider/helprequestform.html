<!DOCTYPE html>
<html>
    <head>
        <title>Help Request Form</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="shortcut icon" href="img/favicon.ico">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">

        <style>
            @import url("https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700");
            body{              
                font-family: "open sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
                word-break: break-word;
            }
            .star{
                color: #ff5656;
                padding-left: 2px;
            }
            .form-control{
                color: #000;
            }
            label,label>span{
                font-weight: 600;
                color: #232323;
                font-size: 13px;
            }
            label.error{
                font-weight: 600;
                font-size: 12px;
                color: #ed1c1c;
                padding-left: 4px;
            }
            .loc-img{
                height: 20px;
                position: absolute;
                top: 8px;
                right: 22px;
                cursor: pointer;
            }
            /*Check Boxes CSS*/
            .check {
                display: block;
                position: relative;
                padding-left: 25px;
                margin-bottom: 12px;
                padding-right: 15px;
                cursor: pointer;
                font-size: 14px;
                -webkit-user-select: none;
                -moz-user-select: none;
                -ms-user-select: none;
                user-select: none;
                margin-left:17px;
            }
            .check input[type=checkbox] {
                position: absolute;
                opacity: 0;
                cursor: pointer;
            }
            .checkmark {
                position: absolute;
                top: 3px;
                left: 0;
                height: 18px;
                width: 18px;
                background-color: #fff ;
                border-color:#0096cc;
                border-style:solid;
                border-width:2px;
                border-radius:3px;

            }
            .check input[type=checkbox]:checked ~ .checkmark {
                background-color: #0096cc  ;
            }
            .checkmark:after {
                content: '';
                position: absolute;
                display: none;
            }
            .check input[type=checkbox]:checked ~ .checkmark:after {
                display: block;
            }
            .check .checkmark:after {
                left: 5px;
                top: 1px;
                width: 5px;
                height: 10px;
                border: solid ;
                border-color:#fff;
                border-width: 0 3px 3px 0;
                -webkit-transform: rotate(45deg);
                -ms-transform: rotate(45deg);
                transform: rotate(45deg);
            }
            .panel-primary>.panel-heading{
                font-size: 21px;
            }
            @media screen and (min-width:1200px){
                .container{
                    width: 800px;
                }
            }
        </style>
    </head>
    <body>

        <div class="container">
            <br>
            <div class="panel panel-primary">
                <div class="panel-heading text-center">Help Request Form</div>
                <div class="panel-body">
                    <form autocomplete="off" class="form-horizontal" id="helpRequestForm">
                        <div class="row">
                            <!--Caller Number-->
                            <div class="col-md-12 col-xs-12">
                                <div class="form-group">
                                    <label class="col-sm-3 col-xs-12" for="callerNumber">Caller Number<span class="star">*</span></label>
                                    <div class="col-sm-8 col-xs-12">
                                        <input type="text" class="form-control" name="callerNumber" id="callerNumber" placeholder="Enter Caller Number">
                                    </div>
                                </div>
                            </div>
                            <!--Caller Name-->
                            <div class="col-md-12 col-xs-12">
                                <div class="form-group">
                                    <label class="col-sm-3 col-xs-12" for="callerName">Caller Name<span class="star">*</span></label>
                                    <div class="col-sm-8 col-xs-12">
                                        <input type="text" class="form-control" id="callerName" name="callerName" placeholder="Enter Caller Name">
                                    </div>
                                </div>
                            </div>
                            <!--Email Id-->
                            <div class="col-md-12 col-xs-12">
                                <div class="form-group">
                                    <label class="col-sm-3 col-xs-12" for="email">Email </label>
                                    <div class="col-sm-8 col-xs-12">
                                        <input type="email" class="form-control" id="email" name="email" placeholder="Enter Email">
                                    </div>
                                </div>
                            </div>
                            <!--Chief Complaint-->
                            <div class="col-md-12 col-xs-12">
                                <div class="form-group">
                                    <label  class="col-sm-3 col-xs-12">Chief Complaint<span class="star">*</span></label>

                                    <div style="display:inline-flex">
                                        <label class="check">
                                            <span>Medical</span>
                                            <input type="checkbox" name="chiefComplaint" checked value="medical">
                                            <span class="checkmark"></span>
                                        </label>
                                        <label class="check">
                                            <span>Police</span>
                                            <input type="checkbox" name="chiefComplaint" value="police">
                                            <span class="checkmark"></span>
                                        </label>
                                        <label class="check">
                                            <span>Fire</span>
                                            <input type="checkbox" name="chiefComplaint" value="fire">
                                            <span class="checkmark"></span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <!--Victim Name-->
                            <div class="col-md-12 col-xs-12">
                                <div class="form-group">
                                    <label class="col-sm-3 col-xs-12" for="victimName">Victim Name<span class="star">*</span></label>
                                    <div class="col-sm-8 col-xs-12">
                                        <input type="text" class="form-control" id="victimName" name="victimName" placeholder="Enter Victim Name">
                                    </div>
                                </div>
                            </div>
                            <!--Age-->
                            <div class="col-md-12 col-xs-12">
                                <div class="form-group">
                                    <label class="col-sm-3 col-xs-12" for="age">Age<span class="star">*</span></label>
                                    <div class="col-sm-8 col-xs-12">
                                        <input type="text" class="form-control" name="age" id="age" placeholder="Enter Age">
                                    </div>
                                </div>
                            </div>
                            <!--Gender-->
                            <div class="col-md-12 col-xs-12">
                                <div class="form-group">
                                    <label class="col-sm-3 col-xs-12" for="age">Gender<span class="star">*</span></label>
                                    <div class="col-sm-8 col-xs-12">
                                        <select class="form-control" id="gender" name="gender">
                                            <option value="0">Select One</option>
                                            <option value="1">Male</option>
                                            <option value="2">Female</option>
                                            <option value="3">Others</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <!--Problem-->
                            <div class="col-md-12 col-xs-12">
                                <div class="form-group">
                                    <label class="col-sm-3 col-xs-12" for="problem">Problem<span class="star">*</span></label>
                                    <div class="col-sm-8 col-xs-12">
                                        <input type="text" class="form-control" id="problem" name="problem" placeholder="Enter Problem">
                                    </div>
                                </div>
                            </div>
                            <!--Incident Address-->
                            <div class="col-md-12 col-xs-12">
                                <div class="form-group">
                                    <label class="col-sm-3 col-xs-12" for="incidentAddress">Incident Address<span class="star">*</span></label>
                                    <div class="col-sm-8 col-xs-12">
                                        <input type="text" class="form-control" id="incidentAddress" name="incidentAddress" placeholder="Enter Incident Address">

                                    </div>
                                </div>
                            </div>
                            <!--Location-->
                            <div class="col-md-12 col-xs-12">
                                <div class="form-group">
                                    <label class="col-sm-3 col-xs-12" for="location">Location (Lat,lang)<span class="star">*</span></label>
                                    <div class="col-sm-8 col-xs-12">
                                        <input type="text" class="form-control" id="location" name="location" placeholder="Enter Location Details">
                                        <img src="https://icon-library.net/images/current-location-icon-png/current-location-icon-png-24.jpg" class="loc-img" alt="Current Location" id="currentLocation">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row text-center"> 
                            <button type="submit" class="btn btn-primary" onclick="validations()">Submit</button>
                            <button type="reset" class="btn btn-danger">Reset</button>
                        </div>
                    </form>

                </div>
            </div>
        </div>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/jquery.validate.min.js"></script>
        <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCcBNzbPOZLjPn3PIzjfYWRjRDEG3rVtSE&libraries=places"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>

        <script>
                                $(document).ready(function() {
//                                    Incident Location from Google Places API
                                    var autocomplete;
                                    autocomplete = new google.maps.places.Autocomplete((document.getElementById('incidentAddress')), {
                                        types: ['geocode']
                                    });
                                    google.maps.event.addListener(autocomplete, 'place_changed', function() {
                                        var near_place = autocomplete.getPlace();
                                        var latitude = near_place.geometry.location.lat();
                                        var langitude = near_place.geometry.location.lng();
                                        document.getElementById('location').value = latitude + ',' + langitude;
                                    });
                                });

//                                Get Current Location
                                $('#currentLocation').click(function() {
                                    if (navigator.geolocation) {
                                        navigator.geolocation.getCurrentPosition(showPosition);

                                    } else {
                                        aler("Geolocation is not supported by this browser.");
                                    }
                                    function showPosition(position) {
                                        var geocoder = new google.maps.Geocoder;
                                        document.getElementById('location').value = position.coords.latitude + ',' + position.coords.longitude;
                                        geocodeLatLng(geocoder);
                                    }
                                });

                                function geocodeLatLng(geocoder) {
                                    var input = document.getElementById('location').value;
                                    var latlngStr = input.split(',', 2);
                                    var latlng = {lat: parseFloat(latlngStr[0]), lng: parseFloat(latlngStr[1])};
                                    geocoder.geocode({'location': latlng}, function(results, status) {
                                        if (status === 'OK') {
                                            if (results[0]) {
                                                document.getElementById('incidentAddress').value = results[0].formatted_address;
                                            }
                                        }
                                    });
                                }

//            Validations
                                function validations() {
                                    $('form').validate({
                                        rules: {
                                            callerNumber: 'required',
                                            callerName: 'required',
                                            victimName: 'required',
                                            // chiefComplaint: 'required',
                                            age: 'required',
                                            gender: 'required',
                                            problem: 'required',
                                            incidentAddress: 'required',
                                            location: 'required'
                                        },
                                        messages: {
                                            callerNumber: 'Please Enter Caller Number',
                                            callerName: 'Please Enter Caller Name',
                                            // chiefComplaint: 'Please Select Chief Complaint',
                                            victimName: 'Please Enter Victim Name',
                                            age: 'Please Enter Age',
                                            gender: 'Please Select Gender',
                                            problem: 'Please Enter problem',
                                            incidentAddress: 'Please Enter Incident Location',
                                            location: 'Please Enter Location Lat and Langs'
                                        },
                                        submitHandler: function(form) {
                                            form.submit();
                                        }
                                    });
                                }
        </script>
    </body>
</html>
